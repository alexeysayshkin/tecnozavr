"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[479],{479:function(t,o,e){e.r(o),e.d(o,{default:function(){return tt}});var d=e(252),r=e(61),i=e(612);const s=t=>((0,d.dD)("data-v-7765bc24"),t=t(),(0,d.Cn)(),t),a={key:0},l={key:1},c={class:"error"},u=s((()=>(0,d._)("h1",{class:"error__header"},"Произошла ошибка при загрузке товара",-1))),n={key:2},p={class:"item"},m={class:"item__pics pics"},h={class:"pics__wrapper"},_=["src","alt"],y={class:"item__info"},g={class:"item__code"},C={key:0,class:"item__title"},w={for:"sizes-item"},f={key:1,class:"item__title"},v={class:"item__form"},A={key:0,class:"item__price"},k={key:1,class:"item__price"},b={class:"form__block"},P=s((()=>(0,d._)("legend",{class:"form__legend"},"Цвет:",-1))),D={class:"colors"},I={class:"colors__label"},S=["value"],z={key:0,class:"error-params"},L={class:"form__block"},T={class:"form__legend"},E={class:"sizes sizes--primery"},M=["value"],F=["value","data-value"],Z={key:0,class:"error-params"},U={class:"item__row"},V=["disabled"],q=(0,d.Uk)("Товар добавлен в корзину"),H={key:2},K={key:3};function W(t,o,e,s,W,Y){const B=(0,d.up)("LoadingPreloader"),G=(0,d.up)("ProductCounter"),$=(0,d.up)("BaseModel");return W.productLoading?((0,d.wg)(),(0,d.iD)("div",a,[(0,d.Wm)(B)])):W.productData?((0,d.wg)(),(0,d.iD)("div",n,[(0,d._)("section",p,[(0,d._)("div",m,[(0,d._)("div",h,[(0,d._)("img",{class:"pics__img",width:"570",height:"570",src:Y.product.preview.file.url,alt:Y.product.title},null,8,_)])]),(0,d._)("div",y,[(0,d._)("span",g,"Артикул: "+(0,i.zw)(Y.product.id),1),null!=W.memoryCapacity?((0,d.wg)(),(0,d.iD)("h2",C,[(0,d._)("label",w,(0,i.zw)(Y.filter.title),1)])):((0,d.wg)(),(0,d.iD)("h2",f,(0,i.zw)(Y.product.title),1)),(0,d._)("div",v,[(0,d._)("form",{class:"form",action:"#",method:"POST",onSubmit:o[5]||(o[5]=(0,r.iM)(((...t)=>Y.addToCatr&&Y.addToCatr(...t)),["prevent"]))},[null!=W.memoryCapacity?((0,d.wg)(),(0,d.iD)("b",A,(0,i.zw)(Y.filterPretty)+" P ",1)):((0,d.wg)(),(0,d.iD)("b",k,(0,i.zw)(Y.pricePretty)+" P ",1)),(0,d._)("fieldset",b,[P,(0,d._)("ul",D,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(Y.product.colors,(t=>((0,d.wg)(),(0,d.iD)("li",{class:"colors__item",key:t.id},[(0,d._)("label",I,[(0,d.wy)((0,d._)("input",{class:"colors__radio sr-only",type:"radio",name:"color",value:t.color.id,"onUpdate:modelValue":o[1]||(o[1]=t=>W.itemColorId=t)},null,8,S),[[r.G2,W.itemColorId]]),(0,d._)("span",{class:"colors__value",style:(0,i.j5)({backgroundColor:t.color.code})},null,4)])])))),128))]),W.itemColorError?((0,d.wg)(),(0,d.iD)("div",z,"Выберите цвет")):(0,d.kq)("",!0)]),(0,d._)("fieldset",L,[(0,d._)("legend",T,(0,i.zw)(Y.product.mainProp.title),1),(0,d._)("ul",E,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(Y.product.offers,(t=>((0,d.wg)(),(0,d.iD)("li",{class:"sizes__item",key:t.id},[(0,d._)("label",{class:"sizes__label",value:t.title},[(0,d.wy)((0,d._)("input",{class:"sizes__radio sr-only","onUpdate:modelValue":o[2]||(o[2]=t=>W.memoryCapacity=t),type:"radio",name:"sizes-item",value:t.id,"data-value":t.title},null,8,F),[[r.G2,W.memoryCapacity]]),((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(t.propValues,(t=>((0,d.wg)(),(0,d.iD)("span",{class:"sizes__value",key:t.id},(0,i.zw)(t.value),1)))),128))],8,M)])))),128))]),W.productIdEroor?((0,d.wg)(),(0,d.iD)("div",Z,"Выберите параметр")):(0,d.kq)("",!0)]),(0,d._)("div",U,[(0,d.Wm)(G,{modelValue:W.productAmount,"onUpdate:modelValue":o[3]||(o[3]=t=>W.productAmount=t)},null,8,["modelValue"]),(0,d._)("button",{class:"button button--primery",type:"submit",disabled:W.productAddSend}," В корзину ",8,V),(0,d.Wm)($,{open:W.isShowAddedMessage,"onUpdate:open":o[4]||(o[4]=t=>W.isShowAddedMessage=t)},{default:(0,d.w5)((()=>[q])),_:1},8,["open"])]),W.productAdded?((0,d.wg)(),(0,d.iD)("div",H,"Товар добавлен в корзину")):(0,d.kq)("",!0),W.productAddSend?((0,d.wg)(),(0,d.iD)("div",K,"Идет отправка товара")):(0,d.kq)("",!0)],32)])])])])):((0,d.wg)(),(0,d.iD)("div",l,[(0,d._)("div",c,[u,(0,d._)("button",{class:"error__btn",onClick:o[0]||(o[0]=(0,r.iM)(((...o)=>t.loadProducts&&t.loadProducts(...o)),["prevent"]))},"Попробуйте еще раз")])]))}var Y=e(274),B=e(544),G=e(736),$=e(694),j=e(669),N=e.n(j),O=e(86),R=e(471),x=e(907),J={props:{productId:{type:[Number,String],required:!0}},components:{ProductCounter:$.Z,LoadingPreloader:R.Z,BaseModel:Y.Z},data(){return{productAmount:1,productData:null,productLoading:!1,productLoadingFalled:!1,productAdded:!1,productAddSend:!1,isShowAddedMessage:!1,memoryCapacity:null,itemColorId:null,productIdEroor:!1,itemColorError:!1,memory:[]}},computed:{pricePretty(){return(0,G.Z)(this.product.price)},filterPretty(){return(0,G.Z)(this.filter.price)},filter(){if(null===this.memoryCapacity)return this.product.offers;const t=this.product.offers.find((t=>t.id==this.memoryCapacity));return t},productAmounts:{get(){return this.item.amount},set(t){this.$store.commit("updateCartProductAmount",{productId:this.item.productId,amount:t})}},product(){return this.productData},category(){return this.productData.category},isInFirstPage(){return 1===this.productAmount}},watch:{memoryId(t){this.memoryCapacity=t},idColorId(t){this.itemColorId=t}},methods:{...(0,x.nv)(["addProductToCart"]),gotoPage:B.Z,addToCat(){this.productAdded=!1,this.productAddSend=!0,this.addProductToCart({productId:this.memoryCapacity,amount:this.productAmount,itemColor:this.itemColorId}).then((()=>{this.isShowAddedMessage=!0,this.productAdded=!0,this.productAddSend=!1,this.productLoadingFalled=!1})).catch((()=>{this.productLoadingFalled=!0,this.productAddSend=!1}))},addToCatr(){null===this.itemColorId?this.itemColorError=!0:null===this.memoryCapacity?(this.productIdEroor=!0,this.itemColorError=!1):(this.itemColorError=!1,this.productIdEroor=!1,this.productAdded=!1,this.productAddSend=!0,this.addProductToCart({productId:this.memoryCapacity,amount:this.productAmount,itemColor:this.itemColorId}).then((()=>{this.isShowAddedMessage=!0,this.productAdded=!0,this.productAddSend=!1,this.productLoadingFalled=!1})).catch((()=>{this.productLoadingFalled=!0,this.productAddSend=!1})))},increment(){this.productAmount=this.productAmount-1},increments(){this.productAmount=this.productAmount+1},goToCat(){this.$router.push({name:"category",params:{id:this.category.id,category:this.category.title}})},loadProduct(){this.productLoading=!0,this.productLoadingFalled=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{N().get(O.C+"/api/products/"+this.productId).then((t=>this.productData=t.data)).then((()=>this.memory.push(this.productData.offers))).catch((()=>this.productLoadingFalled=!0)).then((()=>this.productLoading=!1))}),500)}},created(){this.loadProduct()},beforeRouteUpdate(){this.loadProduct()}},Q=e(744);const X=(0,Q.Z)(J,[["render",W],["__scopeId","data-v-7765bc24"]]);var tt=X}}]);
//# sourceMappingURL=479.87b02181.js.map